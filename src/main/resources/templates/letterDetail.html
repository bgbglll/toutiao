#parse("header.html")
<div id="main">
    <div class="container">
        <ul class="letter-chatlist">
            #foreach($msg in $messages)
            #if ($localUserId == $!{msg.userId})
            <li id="msg-item-$!{msg.message.id}">
                <div class="tooltip fade left in">
                    <div class="tooltip-arrow"></div>
                    <div class="tooltip-inner letter-chat clearfix">
                        <div class="letter-info">
                            <p class="letter-time">$date.format('yyyy-MM-dd HH:mm:ss', $!{msg.message.createdDate})</p>
                            <a href="javascript:void(0);" id="del-link-$!{msg.message.id}" name="4009580" value="$!{msg.message.id}">删除</a>
                        </div>
                        <p class="chat-content">
                            $!{msg.message.content}
                        </p>
                    </div>
                </div>
                <a class="list-head" href="/user/$!{msg.userId}/">
                    <img alt="头像" src="$!{msg.headUrl}">
                </a>
            </li>
            #else

            <li id="msg-item-$!{msg.message.id}">
                <a class="list-head" href="/user/$!{msg.userId}/">
                    <img alt="头像" src="$!{msg.headUrl}">
                </a>
                <div class="tooltip fade right in">
                    <div class="tooltip-arrow"></div>
                    <div class="tooltip-inner letter-chat clearfix">
                        <div class="letter-info">
                            <p class="letter-time">$date.format('yyyy-MM-dd HH:mm:ss', $!{msg.message.createdDate})</p>
                            <a href="javascript:void(0);" id="del-link-$!{msg.message.id}" name="4009580" value="$!{msg.message.id}">删除</a>
                        </div>
                        <p class="chat-content">
                            $!{msg.message.content}
                        </p>
                    </div>
                </div>

            </li>

            #end
            #end
            <div class="col-md-12 column my-right-letter-detail">
                <ul  id="news-page">
                </ul>
            </div>

        </ul>

    </div>
    <script type="text/javascript">
          $(function(){

            // If really is weixin
            $(document).on('WeixinJSBridgeReady', function() {

              $('.weixin-qrcode-dropdown').show();

              var options = {
                "img_url": "",
                "link": "http://nowcoder.com/j/wt2rwy",
                "desc": "",
                "title": "读《Web 全栈工程师的自我修养》"
              };

              WeixinJSBridge.on('menu:share:appmessage', function (argv){
                WeixinJSBridge.invoke('sendAppMessage', options, function (res) {
                  // _report('send_msg', res.err_msg)
                });
              });

              WeixinJSBridge.on('menu:share:timeline', function (argv) {
                WeixinJSBridge.invoke('shareTimeline', options, function (res) {
                  // _report('send_msg', res.err_msg)
                });
              });

              // $(window).on('touchmove scroll', function() {
              //   if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
              //     $('div.backdrop').show();
              //     $('div.share-help').show();
              //   } else {
              //     $('div.backdrop').hide();
              //     $('div.share-help').hide();
              //   }
              // });

            });

          })

    </script>
</div>
<script type="text/javascript" src="/scripts/main/site/home.js"></script>
<script type="text/javascript" src="/scripts/main/site/letterDetail.js"></script>
<script type="text/javascript" src="/scripts/main/site/page.js"></script>
#parse("footer.html")